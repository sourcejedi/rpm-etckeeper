From 60747c8dae14a12263124193572c7eb1177e475b Mon Sep 17 00:00:00 2001
From: Joey Hess <joey@kitenet.net>
Date: Sun, 25 Jul 2010 19:47:45 -0400
Subject: [PATCH 1/1] Ensure that PATH contains the directory containing etckeeper, so that hook scripts that re-exec etckeeper are guaranteed to find it.

---
 debian/changelog |    7 +++++++
 etckeeper        |    6 ++++++
 2 files changed, 13 insertions(+), 0 deletions(-)

diff --git a/debian/changelog b/debian/changelog
index 58bdbd1..3ddc0b6 100644
--- a/debian/changelog
+++ b/debian/changelog
@@ -1,3 +1,10 @@
+etckeeper (0.49) UNRELEASED; urgency=low
+
+  * Ensure that PATH contains the directory containing etckeeper, so
+    that hook scripts that re-exec etckeeper are guaranteed to find it.
+
+ -- Joey Hess <joeyh@debian.org>  Sun, 25 Jul 2010 19:44:37 -0400
+
 etckeeper (0.48) unstable; urgency=low
 
   * Fix backwards test for HGUSER. (Mike Rich)
diff --git a/etckeeper b/etckeeper
index 4c27005..d7b94a0 100755
--- a/etckeeper
+++ b/etckeeper
@@ -25,6 +25,12 @@ export VCS
 HOME=~root
 export HOME
 
+program_directory="${0%/*}"
+if [ -n "$program_directory" ]; then
+	PATH="$PATH:$program_directory"
+	export PATH
+fi
+
 if [ ! -z "$GIT_COMMIT_OPTIONS" ]; then
 	export GIT_COMMIT_OPTIONS
 fi
-- 
1.7.1

